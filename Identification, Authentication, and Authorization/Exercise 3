IMPLEMENTING ROLE-BASED ACCESS CONTROL IN WINDOWS ADMIN CENETER (WAC)

      Windows Admin Center (WAC) provides a web console to perform administrative tasks and manage different machines within the network.

Lab Scenario :

    As a network defender, you should be aware of the various tools and tricks available to manage the servers and clients. 
    WAC enables network defenders to perform administrative tasks on any client (except mobile devices). 
    It uses role-based access control (RBAC) to control the activity of the users connected to the server. 
    WAC allows management of system activity such as starting various services, adding and removing resources, and controlling applications.

Lab Objectives :

    This lab will demonstrate how to install WAC and configure RBAC in WAC to restrict user activities.

Overview of WAC :

    The Windows Admin Center (WAC) is a web-based administration tool used to manage server and client operating systems, hyper-converged clusters, and failover clusters. Some of the features of WAC are listed below:

    Device management
    Windows event management
    File management
    Firewall management
    Local users and groups management
    Network management
    PowerShell tool
    Process tool
    Registry tool
    Remote desktop
    Role and features
    Services, storage, updates, etc.


Lab Tasks

    1.Click Admin Machine-1 to select Admin Machine-1 machine. Click Ctrl+Alt+Delete.


    2.By default Admin account is selected, click admin@123 and press Enter to login.

        If the network screen appears, click Yes.


    3.To install WAC, navigate to Z:\NDE-Tools\NDE Module 02 Identification, Authentication, and Authorization\Windows Admin Center and double-click WindowsAdminCenter1910.msi.

        The installation starts. Check I accept these terms. Click Next to continue.


    4.The default option pertains to Microsoft updates. Click Next.

  

    5.The Configure Gateway Endpoint window appears. Click Next to continue.

        Leave the default settings for port and other options on the window. Click Install.

  

    6.WAC installation starts. If the User Account Control window appears, click yes.

        Installation continues. Check Open Windows Admin Center. Click Finish to complete the installation.

   

    7.If the list of browser applications pops-up. Select Microsoft Edge. Click OK.

        Wait for a few seconds. The Edge browser loads Windows Admin Center.

        If a Select a certificate for authentication pop-up appears, click OK.


    8.The Windows Admin Center appears. By default, you can see that Admin Machine-1 is connected and listed under All Connections.

   

    9.Click on the +Add button to add the Webserver.

  

    10.The Add resources pane opens. Click Add under Windows Server.



    11.The Connection tags pane appears. Type Webserver in the Server name field. Wait for few seconds.



    12.Select the Use another account for this connection radio button, and type the username Administrator and password admin@123. Click Add with credentials.

    

    13.Webserver is added to the Windows Admin Center.

        if Save password pop-up appears, click Never.

   
    14.Click Webserver to connect the server.

        The Windows Admin Center connects to Webserver and displays all the tools under the Server Manager.

    

    15.We have added Webserver to the Windows Admin Center. A network defender can now manage the Webserver through WAC.

        By utilizing the RBAC option in WAC, a network defender can provide only limited access to the user of Web server VM. Here, we will see assigning limited access to the already created user           (john) in web Server VM. To configure RBAC for user john, click Settings at the bottom of the Tools pane on the left.

        The Setting pane appears. Click Role-based Access Control.



    16.The Role-based access control page appears. Click the Apply button at the bottom of the page.



    17.The Restart the WinRM service? dialog appears. Click Yes to continue.



    18.A notification (see the Notifications icon at the upper right corner)about scheduling the application of RBAC appears.
       It takes a maximum of 10 minutes to start the RBAC service. Wait for 10 minutes, refresh the Webserver connection.

   

        If logged out, log in with the credentials for Webserver as given in the Step 12.

   19.Reconnecting to Webserver is done. Navigate to Tools -> Settings. Click the Role-based Access Control option. 
        You can see that the Role-based access control status is Applied. The Remove button appears at the bottom of the page.

        If the status of Role-based access control does not change to applied, then perform Steps#23-27 again.

        RBAC is now added to Webserver.

        Next, Assign a user to the role. Click Local users & groups in the Tools pane on the left.

   

   20.The Local users & groups pane appears. Select the user john under the Users tab.



   21.The Manage membership option is now visible. If it is not visible, click on More and select Manage membership option.

   

   22.Click Manage membership to add the membership to the user. The Manage membership pane now opens.

        Scroll down the list that appears in the Manage Membership pane. In the list, uncheck Users, and check Windows Admin Center Readers. 
        These changes will allow John to view information and settings on the server, but not make changes by assigning the windows admin center readers role. Click Save.



   23.A notification (See Notifications icon) appears indicating that the membership for the user john has been updated successfully.

   

   24.Click Windows Admin Center from top-left corner of the dashboard, to navigate to the Home page.



   25.Select Webserver and click the Manage as tab. If Manage as tab is not visible, click on More tab and select Manage as option.

    

   26.Specify your credentials once the pane opens. Change username to John and password to user@123. We will now log in as a user to Webserver. In Windows Admin Center, click Continue.

   

   27. Wait for a few seconds; Webserver in WAC is loaded for user john. You can see that the user john is selected under Managing as. Click Webserver link to connect.



   28.Since we have logged in as John to Windows Admin Center, Webserver is connected with limited access (It is shown at the upper left corner as Webserver (Limited Access)).

        If you receive any error pop-up, ignore it.

   

   29.As a user of Webserver, you can try to add new storage to it. But, as we have added the user john in RBAC and allowed for limited access permission only, the system will not allow user John to add new storage.

    Click Storage in the Tools pane. Wait for a few seconds; the Storage pane appears on the right side of the window.

    

   30.Under the Disks menu on the Storage pane, click More and select Create VHD option.


   31.The Create VHD pane opens. Type the following in the respective fields. Click Submit.

        VHD folder path: c:\TestFolder

        New VHD file name: test

        File extension: vhd

        Size (GB): 1

        Virtual hard disk type: Fixed

        The following error notification appears (See Notifications icon): Couldn't create the VHD. Error Exception: This operation was blocked by role-based access control settings.

 

    As described above, a network defender can utilize the Windows Admin Center tool for managing the system resources and permissions.

    32.Close all the opened windows.

Question :

In Admin Machine-1, install the Windows Admin Center tool located at Z:\NDE-Tools\NDE Module 02 Identification, Authentication and Authorization\Windows Admin Center. Add Webserver to the Windows Admin Center. Utilize the RBAC option in WAC to assign limited access to the already created user (john) in the Web Server VM. Enter the version number of the webserver.
